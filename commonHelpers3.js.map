{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst STORAGE_KEY = 'feedback-form-state';\n\nconst form = document.querySelector('.feedback-form');\n\nform.addEventListener('input', throttle(onInputChange, 500));\nwindow.addEventListener('load', onLoad);\nform.addEventListener('submit', onFormSubmit);\n\nfunction onInputChange() {\n  const savedData = {\n    email: form.email.value,\n    message: form.message.value,\n  };\n  const savedDataJSON = JSON.stringify(savedData);\n  localStorage.setItem(STORAGE_KEY, savedDataJSON);\n}\n\nfunction onLoad() {\n  const savedStateJSON = localStorage.getItem(STORAGE_KEY);\n  if (savedStateJSON) {\n    const savedState = JSON.parse(savedStateJSON);\n    form.email.value = savedState.email;\n    form.message.value = savedState.message;\n  }\n}\n\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n\n  const savedData = {\n    email: form.email.value,\n    message: form.message.value,\n  };\n\n  console.log(savedData);\n\n  evt.currentTarget.reset();\n  localStorage.removeItem(STORAGE_KEY);\n}\n"],"names":["STORAGE_KEY","form","throttle","onInputChange","onLoad","onFormSubmit","savedData","savedDataJSON","savedStateJSON","savedState","evt"],"mappings":"wIAEA,MAAMA,EAAc,sBAEdC,EAAO,SAAS,cAAc,gBAAgB,EAEpDA,EAAK,iBAAiB,QAASC,EAASC,EAAe,GAAG,CAAC,EAC3D,OAAO,iBAAiB,OAAQC,CAAM,EACtCH,EAAK,iBAAiB,SAAUI,CAAY,EAE5C,SAASF,GAAgB,CACvB,MAAMG,EAAY,CAChB,MAAOL,EAAK,MAAM,MAClB,QAASA,EAAK,QAAQ,KAC1B,EACQM,EAAgB,KAAK,UAAUD,CAAS,EAC9C,aAAa,QAAQN,EAAaO,CAAa,CACjD,CAEA,SAASH,GAAS,CAChB,MAAMI,EAAiB,aAAa,QAAQR,CAAW,EACvD,GAAIQ,EAAgB,CAClB,MAAMC,EAAa,KAAK,MAAMD,CAAc,EAC5CP,EAAK,MAAM,MAAQQ,EAAW,MAC9BR,EAAK,QAAQ,MAAQQ,EAAW,OACjC,CACH,CAEA,SAASJ,EAAaK,EAAK,CACzBA,EAAI,eAAc,EAElB,MAAMJ,EAAY,CAChB,MAAOL,EAAK,MAAM,MAClB,QAASA,EAAK,QAAQ,KAC1B,EAEE,QAAQ,IAAIK,CAAS,EAErBI,EAAI,cAAc,QAClB,aAAa,WAAWV,CAAW,CACrC"}
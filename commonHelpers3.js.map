{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst STORAGE_KEY = 'feedback-form-state';\n\nconst form = document.querySelector('.feedback-form');\n\nform.addEventListener('input', throttle(onInputChange, 500));\nwindow.addEventListener('load', onLoad);\nform.addEventListener('submit', onFormSubmit);\n\nlet savedData = {\n  email: '',\n  message: '',\n};\n\nfunction onInputChange() {\n  savedData = {\n    email: form.email.value,\n    message: form.message.value,\n  };\n  const savedDataJSON = JSON.stringify(savedData);\n  localStorage.setItem(STORAGE_KEY, savedDataJSON);\n}\n\nfunction onLoad() {\n  const savedStateJSON = localStorage.getItem(STORAGE_KEY);\n  if (savedStateJSON) {\n    try {\n      const savedState = JSON.parse(savedStateJSON);\n      form.email.value = savedState.email;\n      form.message.value = savedState.message;\n    } catch (error) {\n      console.error('Error parsing JSON from local storage:', error);\n    }\n  }\n}\n\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n  if (savedData.email === '' || savedData.message === '') {\n    alert('Please fill in all fields before submitting.');\n    return;\n  }\n\n  console.log(savedData);\n  form.reset();\n  localStorage.removeItem(STORAGE_KEY);\n}\n"],"names":["STORAGE_KEY","form","throttle","onInputChange","onLoad","onFormSubmit","savedData","savedDataJSON","savedStateJSON","savedState","error","evt"],"mappings":"wIAEA,MAAMA,EAAc,sBAEdC,EAAO,SAAS,cAAc,gBAAgB,EAEpDA,EAAK,iBAAiB,QAASC,EAASC,EAAe,GAAG,CAAC,EAC3D,OAAO,iBAAiB,OAAQC,CAAM,EACtCH,EAAK,iBAAiB,SAAUI,CAAY,EAE5C,IAAIC,EAAY,CACd,MAAO,GACP,QAAS,EACX,EAEA,SAASH,GAAgB,CACvBG,EAAY,CACV,MAAOL,EAAK,MAAM,MAClB,QAASA,EAAK,QAAQ,KAC1B,EACE,MAAMM,EAAgB,KAAK,UAAUD,CAAS,EAC9C,aAAa,QAAQN,EAAaO,CAAa,CACjD,CAEA,SAASH,GAAS,CAChB,MAAMI,EAAiB,aAAa,QAAQR,CAAW,EACvD,GAAIQ,EACF,GAAI,CACF,MAAMC,EAAa,KAAK,MAAMD,CAAc,EAC5CP,EAAK,MAAM,MAAQQ,EAAW,MAC9BR,EAAK,QAAQ,MAAQQ,EAAW,OACjC,OAAQC,EAAP,CACA,QAAQ,MAAM,yCAA0CA,CAAK,CAC9D,CAEL,CAEA,SAASL,EAAaM,EAAK,CAEzB,GADAA,EAAI,eAAc,EACdL,EAAU,QAAU,IAAMA,EAAU,UAAY,GAAI,CACtD,MAAM,8CAA8C,EACpD,MACD,CAED,QAAQ,IAAIA,CAAS,EACrBL,EAAK,MAAK,EACV,aAAa,WAAWD,CAAW,CACrC"}